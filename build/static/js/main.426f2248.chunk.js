(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{145:function(e,t,n){e.exports=n(284)},150:function(e,t,n){},175:function(e,t){},177:function(e,t){},191:function(e,t){},193:function(e,t){},221:function(e,t){},223:function(e,t){},224:function(e,t){},230:function(e,t){},232:function(e,t){},250:function(e,t){},252:function(e,t){},264:function(e,t){},267:function(e,t){},284:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(139),l=n.n(c),o=(n(150),n(1)),u=n.n(o),s=n(4),i=n(10),p=n(6),m=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"I'm a test"))},f=n(19),b=n(140),v=n(141),h=n(142),E=n.n(h),d=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_BASE_URL||"http://localhost:3001",j=function(){function e(){Object(b.a)(this,e)}return Object(v.a)(e,null,[{key:"request",value:function(){var e=Object(s.a)(u.a.mark((function e(t){var n,a,r,c=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>1&&void 0!==c[1]?c[1]:{},a=c.length>2&&void 0!==c[2]?c[2]:"get",n._token=localStorage.getItem("jobly-token"),console.debug("API Call:",t,n,a),e.prev=4,e.next=7,E()(Object(f.a)({method:a,url:"".concat(d,"/").concat(t)},"get"===a?"params":"data",n));case 7:return e.abrupt("return",e.sent.data);case 10:throw e.prev=10,e.t0=e.catch(4),console.error("API Error:",e.t0.response),r=e.t0.response.data.message,Array.isArray(r)?r:[r];case 15:case"end":return e.stop()}}),e,null,[[4,10]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getCompanies",value:function(){var e=Object(s.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("companies",{search:t});case 2:return n=e.sent,e.abrupt("return",n.companies);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getCompany",value:function(){var e=Object(s.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("companies/".concat(t));case 2:return n=e.sent,e.abrupt("return",n.company);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getJobs",value:function(){var e=Object(s.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("jobs",{search:t});case 2:return n=e.sent,console.log("geJob: ",n),e.abrupt("return",n.jobs);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"registerUser",value:function(){var e=Object(s.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("users",t,"post");case 2:return n=e.sent,console.log("REGISTER USER RESPONSE",n),e.abrupt("return",n.token);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"loginUser",value:function(){var e=Object(s.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("login",t,"post");case 2:return n=e.sent,console.log("LOGIN USER RESPONSE",n),e.abrupt("return",n.token);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getCurrentUser",value:function(){var e=Object(s.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("users/".concat(t));case 2:return n=e.sent,console.log("GOT CURRENT USER RESPONSE",n),e.abrupt("return",n.user);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateUser",value:function(){var e=Object(s.a)(u.a.mark((function e(t,n){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("users/".concat(t),n,"patch");case 2:return a=e.sent,console.log("updateUser RESPONSE",a),e.abrupt("return",a.user);case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"applyToJob",value:function(){var e=Object(s.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("jobs/".concat(t,"/apply"),{},"post");case 2:return n=e.sent,console.log("made a call to applyToJob",n),e.abrupt("return",n.message);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),g=n(7),O=(n(47),function(e){var t=e.name,n=e.description,a=e.logo;return r.a.createElement("div",{className:"CompanyCard has-text-primary"},r.a.createElement("h3",null,t),r.a.createElement("p",null,n),r.a.createElement("img",{src:a}))}),y=function(e){var t=e.companies,n=void 0===t?[]:t;return n.length?r.a.createElement("div",null,n.map((function(e){return r.a.createElement(g.b,{className:"Card",to:"companies/"+e.handle},r.a.createElement(O,{name:e.name,description:e.description,logo:e.logo_url}))}))):r.a.createElement("p",null,"No results were found.")},x=function(e){var t=e.handleSearch,n=Object(a.useState)(""),c=Object(i.a)(n,2),l=c[0],o=c[1];return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),t(l)}},r.a.createElement("input",{name:"search",type:"text",value:l,placeholder:"Enter a company to search for",onChange:function(e){o(e.target.value)}}),r.a.createElement("button",null,"Submit")))},w=function(){var e=Object(a.useState)([]),t=Object(i.a)(e,2),n=t[0],c=t[1];Object(a.useEffect)((function(){function e(){return(e=Object(s.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.getCompanies();case 2:t=e.sent,c(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var l=function(){var e=Object(s.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.getCompanies(t);case 2:n=e.sent,console.log("MATCHING COMPANIES",n),c(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(x,{handleSearch:l}),r.a.createElement(y,{companies:n}))},k=n(5);var C=function(e){var t=e.item,n=void 0===t?{}:t,a=e.handleApply;return r.a.createElement("div",{className:"JobCard"},r.a.createElement("h3",null,r.a.createElement("span",null,n.title)),r.a.createElement("div",null,"Salary: ",n.salary),r.a.createElement("div",null,"Equity: ",n.equity),r.a.createElement("button",{onClick:a,disabled:n.state},n.state?"Applied":"Apply"))},S=function(e){var t=e.idx,n=e.apply,a=void 0===n?function(){return null}:n,c=e.item;return r.a.createElement(C,{item:c,handleApply:function(){return a(t)}})},_=function(e){var t=e.jobs,n=void 0===t?[]:t,a=e.apply,c=void 0===a?function(){return null}:a;return n.length?r.a.createElement("div",null,n.map((function(e,t){return r.a.createElement(S,{key:t,idx:t,apply:c,title:e.title,item:e})}))):r.a.createElement("p",null,"No results were found.")},U=function(){var e=Object(a.useState)([]),t=Object(i.a)(e,2),n=t[0],c=t[1],l=Object(a.useState)(!1),o=Object(i.a)(l,2),p=o[0],m=o[1];function f(){return(f=Object(s.a)(u.a.mark((function e(t){var a,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n[t].id,e.next=3,j.applyToJob(a);case 3:r=e.sent,c((function(e){return e.map((function(e){return e.id===a?Object(k.a)(Object(k.a)({},e),{},{state:r}):e}))}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(a.useEffect)((function(){function e(){return(e=Object(s.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j.getJobs();case 3:t=e.sent,c(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:m(!0);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}m(!1),function(){e.apply(this,arguments)}()}),[]);var b=function(){var e=Object(s.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.getJobs(t);case 2:n=e.sent,console.log("MATCHING JOBS",n),c(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return p?r.a.createElement(r.a.Fragment,null,r.a.createElement(x,{handleSearch:b}),r.a.createElement(_,{jobs:n,apply:function(e){return f.apply(this,arguments)}})):r.a.createElement("p",null,"Content is loading!")},N=r.a.createContext(),A=function(){var e=Object(p.h)().handle,t=Object(a.useContext)(N).currentUser,n=Object(a.useState)([]),c=Object(i.a)(n,2),l=c[0],o=c[1];function m(e){return f.apply(this,arguments)}function f(){return(f=Object(s.a)(u.a.mark((function e(t){var n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(l&&Array.isArray(l.jobs)&&t<l.jobs.length)){e.next=6;break}return n=l.jobs[t].id,e.next=4,j.applyToJob(n);case 4:a=e.sent,o((function(e){var t=Object(k.a)({},e);return t.jobs=t.jobs.map((function(e){return e.id===n?Object(k.a)(Object(k.a)({},e),{},{state:a}):e})),t}));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.useEffect)((function(){(function(){var n=Object(s.a)(u.a.mark((function n(){var a,r,c;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=t.jobs,n.next=3,j.getCompany(e);case 3:r=n.sent,c=new Set(a.map((function(e){return e.id}))),console.log("COMPANY DETAILS",r),r.jobs=r.jobs.map((function(e){return Object(k.a)(Object(k.a)({},e),{},{state:c.has(e.id)?"Applied":null})})),o(r);case 8:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}})()()}),[e,t]),l.jobs?r.a.createElement("div",null,l.jobs.map((function(e,t){return r.a.createElement(S,{key:t,idx:t,apply:m,item:e})}))):r.a.createElement("p",null,"Loading")},T=function(){var e=Object(p.g)(),t=Object(a.useContext)(N).setToken,n=Object(a.useState)({username:"",password:"",first_name:"",last_name:"",email:"",photo_url:""}),c=Object(i.a)(n,2),l=c[0],o=c[1],m=function(e){var t=e.target,n=t.name,a=t.value;o((function(e){return Object(k.a)(Object(k.a)({},e),{},Object(f.a)({},n,a))}))},b=function(){var n=Object(s.a)(u.a.mark((function n(a){var r,c;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a.preventDefault(),r=l,n.prev=2,n.next=5,j.registerUser(r);case 5:c=n.sent,n.next=11;break;case 8:n.prev=8,n.t0=n.catch(2),console.log(n.t0);case 11:c&&(localStorage.setItem("jobly-token",c),t(c),e.push("/jobs"));case 12:case"end":return n.stop()}}),n,null,[[2,8]])})));return function(e){return n.apply(this,arguments)}}();return r.a.createElement("form",{onSubmit:b},r.a.createElement("label",null,"Username: "),r.a.createElement("input",{type:"text",name:"username",value:l.username,placeholder:"password",onChange:m}),r.a.createElement("label",null,"Password: "),r.a.createElement("input",{type:"text",name:"password",value:l.password,placeholder:"password",onChange:m}),r.a.createElement("label",null,"First Name: "),r.a.createElement("input",{type:"text",name:"first_name",value:l.first_name,placeholder:"first_name",onChange:m}),r.a.createElement("label",null,"Last Name: "),r.a.createElement("input",{type:"text",name:"last_name",value:l.last_name,placeholder:"last_name",onChange:m}),r.a.createElement("label",null,"Email: "),r.a.createElement("input",{type:"text",name:"email",value:l.email,placeholder:"email",onChange:m}),r.a.createElement("label",null,"Photo: "),r.a.createElement("input",{type:"text",name:"photo_url",value:l.photo_url,placeholder:"photo_url",onChange:m}),r.a.createElement("button",null,"Register"))},P=function(){var e=Object(a.useContext)(N).setToken,t=Object(p.g)(),n=Object(a.useState)({username:"",password:""}),c=Object(i.a)(n,2),l=c[0],o=c[1],m=function(e){var t=e.target,n=t.name,a=t.value;o((function(e){return Object(k.a)(Object(k.a)({},e),{},Object(f.a)({},n,a))}))},b=function(){var n=Object(s.a)(u.a.mark((function n(a){var r,c;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a.preventDefault(),r=l,n.prev=2,n.next=5,j.loginUser(r);case 5:c=n.sent,n.next=11;break;case 8:n.prev=8,n.t0=n.catch(2),console.log(n.t0);case 11:localStorage.setItem("jobly-token",c),e(c),t.push("/jobs");case 14:case"end":return n.stop()}}),n,null,[[2,8]])})));return function(e){return n.apply(this,arguments)}}();return r.a.createElement("form",{onSubmit:b},r.a.createElement("label",null,"Username: "),r.a.createElement("input",{type:"text",name:"username",value:l.username,placeholder:"password",onChange:m}),r.a.createElement("label",null,"Password: "),r.a.createElement("input",{type:"text",name:"password",value:l.password,placeholder:"password",onChange:m}),r.a.createElement("button",null,"Login"))},R=function(){return Object(a.useContext)(N).currentUser?r.a.createElement("div",null,r.a.createElement("h1",null,"Jobly"),r.a.createElement("p",null,"All the jobs in one, convenient place."),r.a.createElement("h3",null,"Welcome Back!")):r.a.createElement("div",null,r.a.createElement("h1",null,"Jobly"),r.a.createElement("p",null,"All the jobs in one, convenient place."),r.a.createElement(g.b,{to:"/login"},r.a.createElement("button",null,"LogIn")))};function I(e){var t=e.type,n=e.messages;return r.a.createElement("div",{className:"alert alert-".concat(t),role:"alert"},n.map((function(e){return r.a.createElement("p",{className:"mb-0 small",key:e},e)})))}I.defaultProps={type:"danger",messages:[]};var J=I,L=function(){var e=Object(a.useContext)(N),t=e.currentUser,n=e.setCurrentUser;console.log("Username",t);Object(p.g)(),Object(a.useContext)(N).setToken;var c=Object(a.useState)({first_name:t.first_name||"",last_name:t.last_name||"",email:t.email||"",photo_url:t.photo_url||"",password:"",errors:[]}),l=Object(i.a)(c,2),o=l[0],m=l[1],b=Object(a.useRef)(!1);Object(a.useEffect)((function(){o.saveConfirmed&&!b.current&&(b.current=!0,setTimeout((function(){m((function(e){return Object(k.a)(Object(k.a)({},e),{},{saveConfirmed:!1})})),b.current=!1}),3e3))}),[o]);var v=function(e){var t=e.target,n=t.name,a=t.value;m((function(e){var t;return Object(k.a)(Object(k.a)({},e),{},(t={},Object(f.a)(t,n,a),Object(f.a)(t,"errors",[]),t))}))},h=function(){var e=Object(s.a)(u.a.mark((function e(a){var r,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),r={first_name:o.first_name||void 0,last_name:o.last_name||void 0,email:o.email||void 0,photo_url:o.photo_url||void 0,password:o.password},e.prev=2,console.log("entering try/catch"),e.next=6,j.updateUser(t.username,r);case 6:c=e.sent,m((function(e){return Object(k.a)(Object(k.a)({},e),{},{errors:[],saveConfirmed:!0,password:""})})),n(c),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),console.log(a),m((function(t){return Object(k.a)(Object(k.a)({},t),{},{errors:e.t0})}));case 15:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("form",{onSubmit:h},r.a.createElement("label",null,"Username: "),r.a.createElement("p",null,t.username),r.a.createElement("label",null,"First Name: "),r.a.createElement("input",{type:"text",name:"first_name",value:o.first_name,placeholder:"first_name",onChange:v}),r.a.createElement("div",{className:"input-group"},r.a.createElement("label",null,"Last Name: "),r.a.createElement("input",{type:"text",name:"last_name",value:o.last_name,placeholder:"last_name",onChange:v})),r.a.createElement("label",null,"Email: "),r.a.createElement("input",{type:"text",name:"email",value:o.email,placeholder:"email",onChange:v}),r.a.createElement("label",null,"Photo URL: "),r.a.createElement("input",{type:"text",name:"photo_url",value:o.photo_url,placeholder:"photo_url",onChange:v}),r.a.createElement("label",null,"Re-enter Password: "),r.a.createElement("input",{type:"text",name:"password",value:o.password,placeholder:"password",onChange:v}),o.errors.length?r.a.createElement(J,{type:"danger",messages:o.errors}):null,o.saveConfirmed?r.a.createElement(J,{type:"success",messages:["User updated successfully."]}):null,r.a.createElement("button",null,"Submit"))};var q=function(e){var t=e.exact,n=e.path,c=e.children;return Object(a.useContext)(N).currentUser?r.a.createElement(p.b,{exact:t,path:n},c):r.a.createElement(p.a,{to:"/login"})},D=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(p.d,null,r.a.createElement(p.b,{exact:!0,path:"/"},r.a.createElement(R,null)),r.a.createElement(q,{exact:!0,path:"/companies"},r.a.createElement(w,null)),r.a.createElement(q,{exact:!0,path:"/companies/:handle"},r.a.createElement(A,null)),r.a.createElement(q,{exact:!0,path:"/jobs"},r.a.createElement(U,null)),r.a.createElement(q,{exact:!0,path:"/jobs/:"},r.a.createElement(m,null)),r.a.createElement(p.b,{exact:!0,path:"/profile"},r.a.createElement(L,null)),r.a.createElement(p.b,{exact:!0,path:"/login"},r.a.createElement(P,null)),r.a.createElement(p.b,{exact:!0,path:"/register"},r.a.createElement(T,null)),r.a.createElement(p.b,null,r.a.createElement("p",null,"Hmmm. I can't seem to find what you want."))))},B=n(144),F=function(e){var t=e.handleLogOut,n=Object(a.useContext)(N).currentUser;console.log("NavBar says currentUser is: ",n);return r.a.createElement("div",{className:"NavBar"},r.a.createElement(g.c,{exact:!0,to:"/"},"Jobly"),n?r.a.createElement(r.a.Fragment,null,r.a.createElement(g.c,{exact:!0,to:"/companies"},"Companies"),r.a.createElement(g.c,{exact:!0,to:"/jobs"},"Jobs"),r.a.createElement(g.c,{exact:!0,to:"/profile"},"Profile"),r.a.createElement(g.c,{exact:!0,to:"/",onClick:t},"Logout")):r.a.createElement(r.a.Fragment,null,r.a.createElement(g.c,{exact:!0,to:"/login",className:"NavLink"},"Login"),r.a.createElement(g.c,{exact:!0,to:"/register"},"Register")))};var W=function(){var e=Object(a.useState)(localStorage.getItem("jobly-token")),t=Object(i.a)(e,2),n=t[0],c=t[1],l=Object(a.useState)(!1),o=Object(i.a)(l,2),p=o[0],m=o[1],f=Object(a.useState)(null),b=Object(i.a)(f,2),v=b[0],h=b[1];return Object(a.useEffect)((function(){var e=function(){var e=Object(s.a)(u.a.mark((function e(){var t,a,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=Object(B.decode)(n),a=t.username,e.next=4,j.getCurrentUser(a);case 4:r=e.sent,h(r),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),h(null);case 11:m(!0);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();m(!1),e()}),[n]),p?r.a.createElement(N.Provider,{value:{currentUser:v,setCurrentUser:h,setToken:c}},r.a.createElement("div",{className:"App"},r.a.createElement(F,{handleLogOut:function(){h(null),c(null),localStorage.removeItem("jobly-token")}}),r.a.createElement(D,null))):r.a.createElement("p",null,"Content is loading!")};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(g.a,null,r.a.createElement(W,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},47:function(e,t,n){}},[[145,1,2]]]);
//# sourceMappingURL=main.426f2248.chunk.js.map